<!DOCTYPE html>


  
<html itemscope itemtype="https://schema.org/WebPage" class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="siteBaseUrl" content="https://malfunceddie.github.io/">
    <meta name="author" content="MalfuncEddie">
    <meta name="description" content="Malfunctioning Eddie&#39;s Ramblings">
    <meta name="keywords" content="blog,personal,technical,awx,ansible,vmware,xymon,netbox">
    <meta name="generator" content="Hugo 0.98.0" />
    <title>
        
           
               AWX and execution/hop nodes, how hard can it be? &vert; Malfunctioning Eddie&#39;s Ramblings
           
        
    </title>
    <meta itemprop="name" content="AWX and execution/hop nodes, how hard can it be?">
    <meta itemprop="description" content="AWX and execution/hop nodes, how hard can it be? - Malfunctioning Eddie&#39;s Ramblings">
    <meta property="og:title" content="AWX and execution/hop nodes, how hard can it be?">
    <meta property="og:description" content="AWX and execution/hop nodes, how hard can it be? - Malfunctioning Eddie&#39;s Ramblings">
    <meta property="og:image" content="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?size=200">
    <meta property="og:url" content="https://malfunceddie.github.io/article/awx-hop-nodes/">
    <meta property="og:site_name" content="Malfunctioning Eddie&#39;s Ramblings">
    <meta property="og:type" content="article">

    


    <script src="/modernizr-simple.js"></script>

    
    <link href="/article/awx-hop-nodes/" rel="alternate" type="application/rss+xml" title="Malfunctioning Eddie&#39;s Ramblings" />
    <link href="/article/awx-hop-nodes/" rel="feed" type="application/rss+xml" title="Malfunctioning Eddie&#39;s Ramblings" />
    

    
    <link rel="canonical" href="https://malfunceddie.github.io/article/awx-hop-nodes/">
    

    <link rel="stylesheet" href="https://malfunceddie.github.io/theme.css">

    

    
        
    
</head>

<body class="bilberry-hugo-theme">

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="/article" target="_blank">Articles</a></li>
                
            
                
                    <li><a href="https://malfunceddie.github.io/page/about/">About</a></li>
                
            
        </ul>

        
    </div>
</nav>


    
    <header>

    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="/ava.gif" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title">
                <a href="/">
                    Malfunctioning Eddie&#39;s Ramblings
                </a>
            </h3>

            
                <span class="subtitle">Trying to make sense through rambling?</span>
            
        </div>

        

        
            <div class="toggler">
        
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
    </div>
</header>


    <div class="main container">
        
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://malfunceddie.github.io/article/awx-hop-nodes/">
    <i class="fas fa-fw fa-pencil-alt"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h1 class="article-title">
        <a href="https://malfunceddie.github.io/article/awx-hop-nodes/">
            AWX and execution/hop nodes, how hard can it be?
        </a>
    </h1>

    <div class="meta">
        
            
                <span class="date moment">2022-05-03</span>
            
        

        

        

        
            <span class="author">
                
                
                    <a href="https://malfunceddie.github.io/author/malfuncedddie/">MalfuncEdddie</a>
                
            </span>
        
    </div>

    
        
            <h2>Table of Contents</h2>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#intro-and-disclaimer">Intro and disclaimer</a></li>
    <li><a href="#enviroment">Enviroment</a></li>
    <li><a href="#how-i-think-it-should-work">How I think it should work</a></li>
    <li><a href="#translating-how-i-think-it-works-to-lets-make-this-work">Translating &ldquo;How I think it works&rdquo; to &ldquo;Lets make this work&rdquo;</a></li>
  </ul>
</nav>
        

        <h2 id="intro-and-disclaimer">Intro and disclaimer</h2>
<p>With the migration of AWX to k8s (with the awx-operator) I kind of gotten stuck because I lost some connectivity to my test enviroment (AKS ins azure and ansible &ldquo;clients&rdquo; in my homelab). Yes I could fix the network but with with the release of ansible receptor I can just deploy a execution node in my homelab and execute everything from the execution node. How hard can it be.</p>
<p>Disclaimer 1: THESE RAMBELINGS ARE PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p>Disclaimer 2: DO NOT USE IN PRODUCTION!
Please buy red hat automation platform if you want a supported version.</p>
<p>Still here? Let go on a technical adventure.</p>
<h2 id="enviroment">Enviroment</h2>
<pre tabindex="0"><code>AKS                                                        Home lab
┌────────────────────────────────────────────┐
│                                            │
│ ┌────────┐ ┌────────┐ ┌────────┐ ┌───────┐ │
│ │awx-task│ │awx-web │ │awx-ee  │ │redis  │ │
│ │        │ │        │ │        │ │       │ │
│ │        │ │        │ │        │ │       │ │
│ │        │ │        │ │        │ │       │ │
│ └────────┘ └────────┘ └────────┘ └───────┘ │
│                                            ├────────────────────┐
│                                            │                    ▼
│                                            │             ┌──────────────┐
│                                            │             │ Linux        │
│                                            │             │              │
│                                            │             │execution     │
└────────────────────────────────────────────┘             │              │
                                                           │ node         │
                                                           └──────────────┘
</code></pre><p>We got a running AWX in k8s installed with the awx-operator. In my home lab I got a linux server that will (hopefully) act as execution node.</p>
<h2 id="how-i-think-it-should-work">How I think it should work</h2>
<p>The backing project of the automation mesh as Red Hat calls it is a prject called ansible-receptor (<strong><a href="https://github.com/ansible/receptor">receptor</a></strong>). This allows you to build a mesh network that can execute certain &ldquo;work commands&rdquo; on receptor nodes in its mesh network.</p>
<p>Awx workflow:</p>
<ol>
<li>Press launch</li>
<li>AWX launches an internal k8s pod executes the playbook</li>
</ol>
<p>Awx workflow with receptor:</p>
<ol>
<li>Press launch</li>
<li>Awx knows it should be executed not on k8s but on a execution node</li>
<li>It sends by receptor network an ansible-runner command to the node</li>
<li>Node launches a container that executes the playbook</li>
</ol>
<h2 id="translating-how-i-think-it-works-to-lets-make-this-work">Translating &ldquo;How I think it works&rdquo; to &ldquo;Lets make this work&rdquo;</h2>
<p>tbc</p>

    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    
                    
                    <a href="https://malfunceddie.github.io/tags/awx/">AWX</a>
                    
                
                    
                    
                    <a href="https://malfunceddie.github.io/tags/ansible/">ansible</a>
                    
                
            </div>
        </div>
    

    
</div>

</article>

        
    </div>

    
        <div id="comments-container">
            
            

            
    <script src="https://giscus.app/client.js"
        data-repo="MalfuncEddie/MalfuncEddie.github.io"
        data-repo-id="R_kgDOHRoesw"
        data-category="General"
        data-category-id="DIC_kwDOHRoes84CO-t1"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata=""
        data-theme="light"
        
            data-lang="en"
        
        crossorigin="anonymous"
        async>
    </script>
    <div id="giscus"></div>


            

        </div>
    

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
            <ul>
                
                
                    <li>
                        <a href="https://malfunceddie.github.io/article/awx-hop-nodes/">AWX and execution/hop nodes, how hard can it be?</a>
                    </li>
                
                    <li>
                        <a href="https://malfunceddie.github.io/archive/">Archive page</a>
                    </li>
                
            </ul>
        </div>
        

        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>

                
                <a href="https://twitter.com/MalfuncEddie" target="_blank"><i class="fab fa-twitter"></i></a>
                
                <a href="https://github.com/MalfuncEddie/" target="_blank"><i class="fab fa-github"></i></a>
                
                <a href="https://www.linkedin.com/in/stefan-coussens-9230753" target="_blank"><i class="fab fa-linkedin"></i></a>
                
            </div>
            

            

            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/MalfuncEddie/" target="_blank">
                &copy;
                
                2022
                
                by MalfuncEddie
            </a>
            
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme"
                target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


    

    


    <script src="https://malfunceddie.github.io/theme.js"></script>

    
    
    

    
</body>

</html>
